common:
    int process_id                               << $(processID),
    int vbf_veto                                 << $(VBFVeto),
    int is_sf                                    << $(isSF),
    int is_ee                                    << $(isEE),
    int is_em                                    << $(isEM),
    int n_jets                                   << $(NAllJets),
    float lept_0_pt                              << $(Lepton0Pt)/1000.,
    float lept_1_pt                              << $(Lepton1Pt)/1000.,
    float bjet_0_pt                              << $(BJet0Pt)/1000.,
    float bjet_1_pt                              << $(BJet1Pt)/1000.,
    float ll_m                                   << $(DiLeptonMass)/1000.,
    float ll_pt                                  << $(DiLeptonPt)/1000.,
    float ll_deltar                              << $(DiLeptonDeltaR),
    float bb_m                                   << $(DiBJetMass)/1000.,
    float bb_pt                                  << $(DiBJetPt)/1000.,
    float bb_deltar                              << $(DiBJetDeltaR),
    float met_met                                << $(MET_met)/1000.,
    float met_sig                                << [MET:metsig],
    float ht2r                                   << [HT2R],
    float m_t2_bb                                << [MT2_BB],
    float mt_lep0_met                            << $(MT_LEP0_MET)/1000.,
    float mt_lep1_met                            << $(MT_LEP1_MET)/1000.,
    float mt_l_min                               << $(MT_L_min)/1000.,
    float deltar_min_bl                          << $(BJetLeptonDeltaRmin),
    float m_bbll                                 << $(MBBLL)/1000.,
    float m_bbllmet                              << $(MBBLLMET)/1000.,
    float m_bl                                   << $(M_BL)/1000.,
    float mt_b_min                               << $(MT_B_min)/1000.,
    float sum_met_ptll                           << [SUM_MET_PTLL]/1000.,
    int bjet_0_truthinfo                         << $(BJet0TruthLabelID),
    int bjet_1_truthinfo                         << $(BJet1TruthLabelID),
    int yield                                    << 1,
    float dsid                                   << $(dsid),
    int n_truth_jets                             << $(NTruthJets),
    float lepton_sf_nom                          << [LeptonSF],
    float lepton_sf_el_eff_id_up                 << [LeptonSF:EL_EFF_ID_TOTAL_1NPCOR_PLUS_UNCOR__1up],
    float lepton_sf_el_eff_id_down               << [LeptonSF:EL_EFF_ID_TOTAL_1NPCOR_PLUS_UNCOR__1down],
    float lepton_sf_el_eff_iso_up                << [LeptonSF:EL_EFF_Iso_TOTAL_1NPCOR_PLUS_UNCOR__1up],
    float lepton_sf_el_eff_iso_down              << [LeptonSF:EL_EFF_Iso_TOTAL_1NPCOR_PLUS_UNCOR__1down],
    float lepton_sf_el_eff_reco_up               << [LeptonSF:EL_EFF_Reco_TOTAL_1NPCOR_PLUS_UNCOR__1up],
    float lepton_sf_el_eff_reco_down             << [LeptonSF:EL_EFF_Reco_TOTAL_1NPCOR_PLUS_UNCOR__1down],
    float lepton_sf_muon_eff_iso_stat_up         << [LeptonSF:MUON_EFF_ISO_STAT__1up],
    float lepton_sf_muon_eff_iso_stat_down       << [LeptonSF:MUON_EFF_ISO_STAT__1down],
    float lepton_sf_muon_eff_iso_sys_up          << [LeptonSF:MUON_EFF_ISO_SYS__1up],
    float lepton_sf_muon_eff_iso_sys_down        << [LeptonSF:MUON_EFF_ISO_SYS__1down],
    float lepton_sf_muon_eff_reco_stat_up        << [LeptonSF:MUON_EFF_RECO_STAT__1up],
    float lepton_sf_muon_eff_reco_stat_down      << [LeptonSF:MUON_EFF_RECO_STAT__1down],
    float lepton_sf_muon_eff_reco_sys_up         << [LeptonSF:MUON_EFF_RECO_SYS__1up],
    float lepton_sf_muon_eff_reco_sys_down       << [LeptonSF:MUON_EFF_RECO_SYS__1down],
    float lepton_sf_muon_eff_reco_stat_lowpt_up     << [LeptonSF:MUON_EFF_RECO_STAT_LOWPT__1up],
    float lepton_sf_muon_eff_reco_stat_lowpt_down   << [LeptonSF:MUON_EFF_RECO_STAT_LOWPT__1down],
    float lepton_sf_muon_eff_reco_sys_lowpt_up      << [LeptonSF:MUON_EFF_RECO_SYS_LOWPT__1up],
    float lepton_sf_muon_eff_reco_sys_lowpt_down    << [LeptonSF:MUON_EFF_RECO_SYS_LOWPT__1down],
    float jet_jvt_efficency_nom                     << [JvtSF],
    float jet_jvt_efficency_up                      << [JvtSF:JET_JvtEfficiency__1up],
    float jet_jvt_efficency_down                    << [JvtSF:JET_JvtEfficiency__1down],
    float jet_fjvt_efficency_up                     << [JvtSF:JET_fJvtEfficiency__1up],
    float jet_fjvt_efficency_down                   << [JvtSF:JET_fJvtEfficiency__1down],
    float prw_nom                                   << [PUWeight],
    float prw_datasf_up                             << [PUWeight:PRW_DATASF__1up],
    float prw_datasf_down                           << [PUWeight:PRW_DATASF__1down],
    float trigger_sf_nom                            << [TriggerSF],
    float trigger_sf_el_eff_trigger_up              << [TriggerSF:EL_EFF_Trigger_TOTAL_1NPCOR_PLUS_UNCOR__1up],
    float trigger_sf_el_eff_trigger_down            << [TriggerSF:EL_EFF_Trigger_TOTAL_1NPCOR_PLUS_UNCOR__1down],
    float trigger_sf_nom_muon_eff_trig_stat_up      << [TriggerSF:MUON_EFF_TrigStatUncertainty__1up],
    float trigger_sf_nom_muon_eff_trig_stat_down    << [TriggerSF:MUON_EFF_TrigStatUncertainty__1down],
    float trigger_sf_nom_muon_eff_trig_sys_up       << [TriggerSF:MUON_EFF_TrigSystUncertainty__1up],
    float trigger_sf_nom_muon_eff_trig_sys_down     << [TriggerSF:MUON_EFF_TrigSystUncertainty__1down],
    float btag_sf_nom                                     << [BTagSF:DL1r:FixedCutBEff_77],
    float btag_sf_eff_eigen_b_0_up                        << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_B_0__1up],
    float btag_sf_eff_eigen_b_0_down                      << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_B_0__1down],
    float btag_sf_eff_eigen_b_1_up                        << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_B_1__1up],
    float btag_sf_eff_eigen_b_1_down                      << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_B_1__1down],
    float btag_sf_eff_eigen_b_2_up                        << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_B_2__1up],
    float btag_sf_eff_eigen_b_2_down                      << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_B_2__1down],
    float btag_sf_eff_eigen_c_0_up                        << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_C_0__1up],
    float btag_sf_eff_eigen_c_0_down                      << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_C_0__1down],
    float btag_sf_eff_eigen_c_1_up                        << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_C_1__1up],
    float btag_sf_eff_eigen_c_1_down                      << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_C_1__1down],
    float btag_sf_eff_eigen_c_2_up                        << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_C_2__1up],
    float btag_sf_eff_eigen_c_2_down                      << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_C_2__1down],
    float btag_sf_eff_eigen_c_3_up                        << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_C_3__1up],
    float btag_sf_eff_eigen_c_3_down                      << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_C_3__1down],
    float btag_sf_eff_eigen_light_0_up                    << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_Light_0__1up],
    float btag_sf_eff_eigen_light_0_down                  << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_Light_0__1down],
    float btag_sf_eff_eigen_light_1_up                    << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_Light_1__1up],
    float btag_sf_eff_eigen_light_1_down                  << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_Light_1__1down],
    float btag_sf_eff_eigen_light_2_up                    << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_Light_2__1up],
    float btag_sf_eff_eigen_light_2_down                  << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_Light_2__1down],
    float btag_sf_eff_eigen_light_3_up                    << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_Light_3__1up],
    float btag_sf_eff_eigen_light_3_down                  << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_Eigen_Light_3__1down],
    float btag_sf_eff_eigen_extrapolation_up              << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_extrapolation__1up],
    float btag_sf_eff_eigen_extrapolation_down            << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_extrapolation__1down],
    float btag_sf_eff_eigen_extrapolation_from_charm_up   << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_extrapolation_from_charm__1up],
    float btag_sf_eff_eigen_extrapolation_from_charm_down << [BTagSF:DL1r:FixedCutBEff_77:FT_EFF_extrapolation_from_charm__1down];

common_1tag_res:
    int m_hh_truth 				<< $(mHH_truth),
    int n_electrons 			<< $(NElectrons),
    int n_mus 					<< $(NMuons),
    int n_other_jets 			<< $(NOtherJets),
    int n_central_jets 			<< $(NCentralJets),
    int n_forward_jets 			<< $(NForwardJets),

    float lept_0_eta 			<< $(Lepton0Eta),
    float lept_0_phi 			<< $(Lepton0Phi),
    float lept_0_e 				<< $(Lepton0E)/1000.0,
    float lept_0_d0sig 			<< $(Lepton0d0sigBL),
    float lept_1_eta 			<< $(Lepton1Eta),
    float lept_1_phi 			<< $(Lepton1Phi),
    float lept_1_e 				<< $(Lepton1E)/1000.0,
    float lept_1_d0sig 			<< $(Lepton1d0sigBL),

    float bjet_0_eta 			<< $(BJet0Eta),
    float bjet_0_phi 			<< $(BJet0Phi),
    float bjet_0_e 				<< $(BJet0E)/1000.0,

    float bjet_1_eta 			<< $(BJet1Eta),
    float bjet_1_phi 			<< $(BJet1Phi),
    float bjet_1_e 				<< $(BJet1E)/1000.0,

    float otherjet_0_pt	 		<< $(OtherJet0Pt)/1000.0,
    float otherjet_0_eta 		<< $(OtherJet0Eta),
    float otherjet_0_phi 		<< $(OtherJet0Phi),
    float otherjet_0_e 			<< $(OtherJet0E)/1000.0,

    float otherjet_1_pt 		<< $(OtherJet1Pt)/1000.0,
    float otherjet_1_eta 		<< $(OtherJet1Eta),
    float otherjet_1_phi 		<< $(OtherJet1Phi),
    float otherjet_1_e 			<< $(OtherJet1E)/1000.0,

    float otherjet_2_pt 		<< $(OtherJet2Pt)/1000.0,
    float otherjet_2_eta 		<< $(OtherJet2Eta),
    float otherjet_2_phi 		<< $(OtherJet2Phi),
    float otherjet_2_e 			<< $(OtherJet2E)/1000.0,

    float otherjet_3_pt 		<< $(OtherJet3Pt)/1000.0,
    float otherjet_3_eta 		<< $(OtherJet3Eta),
    float otherjet_3_phi 		<< $(OtherJet3Phi),
    float otherjet_3_e 			<< $(OtherJet3E)/1000.0,

    float otherjet_4_pt 		<< $(OtherJet4Pt)/1000.0,
    float otherjet_4_eta 		<< $(OtherJet4Eta),
    float otherjet_4_phi 		<< $(OtherJet4Phi),
    float otherjet_4_e 			<< $(OtherJet4E)/1000.0,

    float ll_deltaeta 			<< $(DiLeptonDeltaEta),
    float ll_deltaphi 			<< $(DiLeptonDeltaPhi),
    float ll_deltapt 			<< $(DiLeptonDeltaPt)/1000.0,

    float bb_deltaeta 			<< $(DiBJetDeltaEta),
    float bb_deltaphi 			<< $(DiBJetDeltaPhi),
    float bb_deltapt 			<< $(DiBJetDeltaPt)/1000.0,

    float deltar_max_bl 		<< $(BJetLeptonDeltaRmax),
    float deltar_diff_bl 		<< $(BJetLeptonDeltaRdiff),

    float met_sumet 			<< $(MET_sumet)/1000.0,
    float met_phi 				<< [MET:metphi],

    float mmc_mlnu3p 			<< $(MMC_mlnu3p)/1000.0,
    int mmc_fit_status 			<< $(MMC_fitstatus),
    float mct 					<< $(MCT),
    float mcoll 				<< $(MColl),
    float mcoll_x0 				<< $(MColl_x0),
    float mcoll_x1 				<< $(MColl_x1),
    float m_hh 					<< [M_HH]/1000.0,
    float dphi_hh 				<< [DPHI_HH],
    float met_phi_centrality 	<< [MET_PHI_CENTRALITY],
    float dphi_met_ll 			<< [DPHI_MET_LL],
    float dphi_metll_bb 		<< [DPHI_MET_LL_BB],
    float dpt_met_ll 			<< [DPT_MET_LL]/1000.0,
    float dpt_metll_bb 			<< [DPT_MET_LL_BB]/1000.0,
    float ht2 					<< [HT2]/1000.0,
    float sphericity 			<< [SPHERICITY],
    float pt_bbll_scalar 		<< $(PtBBLLScalar)/1000.0,
    float pt_bbll_vector 		<< $(PtBBLLVector)/1000.0,
    float pt_bbllmet_scalar 	<< $(PtBBLLMETScalar)/1000.0,
    float pt_bbllmet_vector 	<< $(PtBBLLMETVector)/1000.0,
    float m_ttbar 				<< $(KLF_mtop)/1000.0;

additional_1tag:
    float bjet_1_tagweight 		<< $(BJet1TagWeight),
    int bjet_1_truthid 			<< $(BJet1TruthLabelID),
    int bjet_1_pass_dl1e70 		<< $(BJet1PassDL1E70),
    int bjet_1_pass_dl1e77 		<< $(BJet1PassDL1E77),
    int bjet_1_pass_dl1e85 		<< $(BJet1PassDL1E85),

    float otherjet_0_tagweight 	<< $(OtherJet0TagWeight),
    int otherjet_0_truthid 		<< $(OtherJet0TruthLabelID),
    int otherjet_0_pass_dl1e70 	<< $(OtherJet0PassDL1E70),
    int otherjet_0_pass_dl1e77 	<< $(OtherJet0PassDL1E77),
    int otherjet_0_pass_dl1e85 	<< $(OtherJet0PassDL1E85),

    float otherjet_1_tagweight 	<< $(OtherJet1TagWeight),
    int otherjet_1_truthid 		<< $(OtherJet1TruthLabelID),
    int otherjet_1_pass_dl1e70 	<< $(OtherJet1PassDL1E70),
    int otherjet_1_pass_dl1e77 	<< $(OtherJet1PassDL1E77),
    int otherjet_1_pass_dl1e85 	<< $(OtherJet1PassDL1E85),

    float otherjet_2_tagweight 	<< $(OtherJet2TagWeight),
    int otherjet_2_truthid 		<< $(OtherJet2TruthLabelID),
    int otherjet_2_pass_dl1e70 	<< $(OtherJet2PassDL1E70),
    int otherjet_2_pass_dl1e77 	<< $(OtherJet2PassDL1E77),
    int otherjet_2_pass_dl1e85 	<< $(OtherJet2PassDL1E85),

    float otherjet_3_tagweight 	<< $(OtherJet3TagWeight),
    int otherjet_3_truthid 		<< $(OtherJet3TruthLabelID),
    int otherjet_3_pass_dl1e70 	<< $(OtherJet3PassDL1E70),
    int otherjet_3_pass_dl1e77 	<< $(OtherJet3PassDL1E77),
    int otherjet_3_pass_dl1e85 	<< $(OtherJet3PassDL1E85),

    float otherjet_4_tagweight 	<< $(OtherJet4TagWeight),
    int otherjet_4_truthid 		<< $(OtherJet4TruthLabelID),
    int otherjet_4_pass_dl1e70 	<< $(OtherJet4PassDL1E70),
    int otherjet_4_pass_dl1e77 	<< $(OtherJet4PassDL1E77),
    int otherjet_4_pass_dl1e85 	<< $(OtherJet4PassDL1E85);


@Cut2TagMllSR1:   common 		  >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_2tagSR1.root:$(ntupleTreeName)
@Cut2TagMllSR1:   common_1tag_res >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_2tagSR1.root:$(ntupleTreeName)
@Cut2TagMbbSR2:   common 		  >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_2tagSR2.root:$(ntupleTreeName)
@Cut2TagMbbSR2:   common_1tag_res >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_2tagSR2.root:$(ntupleTreeName)
@Cut2TagMllTopCR: common 		  >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_2tagTopCR.root:$(ntupleTreeName)
@Cut2TagMllTopCR: common_1tag_res >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_2tagTopCR.root:$(ntupleTreeName)
@Cut2TagMbbZllCR: common          >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_2tagZllCR.root:$(ntupleTreeName)
@Cut2TagMbbZllCR: common_1tag_res >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_2tagZllCR.root:$(ntupleTreeName)
@Cut1TagMllSR1:   common          >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_1tagSR1.root:$(ntupleTreeName)
@Cut1TagMllSR1:   common_1tag_res >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_1tagSR1.root:$(ntupleTreeName)
@Cut1TagMllSR1:   additional_1tag >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_1tagSR1.root:$(ntupleTreeName)
@Cut1TagMllSR2:   common          >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_1tagSR2.root:$(ntupleTreeName)
@Cut1TagMllSR2:   common_1tag_res >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_1tagSR2.root:$(ntupleTreeName)
@Cut1TagMllSR2:   additional_1tag >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_1tagSR2.root:$(ntupleTreeName)
@Cut1TagMllTopCR: common          >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_1tagTopCR.root:$(ntupleTreeName)
@Cut1TagMllTopCR: common_1tag_res >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_1tagTopCR.root:$(ntupleTreeName)
@Cut1TagMllTopCR: additional_1tag >> data/ntup/unmerged/systematics_1tag_res/$(jobID)_1tagTopCR.root:$(ntupleTreeName)
